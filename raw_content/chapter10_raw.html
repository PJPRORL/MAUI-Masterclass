<!doctype html>
<html lang="nl-NL" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.66" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://tm-programmingadvanced.netlify.app/lessen_2425/10-dapper-inner-joins-deel-2.html"><meta property="og:site_name" content="Programming Advanced"><meta property="og:title" content="Dapper inner joins deel 2"><meta property="og:description" content="Inleiding In dit hoofdstuk leren we hoe we met Dapper een inner join kunnen uitvoeren en hierdoor data ophalen uit meerdere tabellen. Specifiek behandelen we een-op-veel relatie..."><meta property="og:type" content="article"><meta property="og:locale" content="nl-NL"><meta property="og:updated_time" content="2024-08-30T07:50:04.000Z"><meta property="article:author" content="Docenten Programming Advanced"><meta property="article:modified_time" content="2024-08-30T07:50:04.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Dapper inner joins deel 2","image":[""],"dateModified":"2024-08-30T07:50:04.000Z","author":[{"@type":"Person","name":"Docenten Programming Advanced"}]}</script><meta name="theme-color" content="#3eaf7c"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="manifest" href="/manifest.webmanifest"><link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png"><link rel="mask-icon" href="/icons/logo.svg" color="#3eaf7c"><link rel="stylesheet" href="/css/all.min.css"><link rel="icon" href="/icons/logo.svg"><title>Dapper inner joins deel 2 | Programming Advanced</title><meta name="description" content="Inleiding In dit hoofdstuk leren we hoe we met Dapper een inner join kunnen uitvoeren en hierdoor data ophalen uit meerdere tabellen. Specifiek behandelen we een-op-veel relatie...">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-0bb84fce.css" as="style"><link rel="stylesheet" href="/assets/style-0bb84fce.css">
    <link rel="modulepreload" href="/assets/app-8012b78e.js"><link rel="modulepreload" href="/assets/10-dapper-inner-joins-deel-2.html-f45f98c4.js"><link rel="modulepreload" href="/assets/10-dapper-inner-joins-deel-2.html-aac0c9fc.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-c27b6911.js"><link rel="prefetch" href="/assets/index.html-af8cc5e6.js" as="script"><link rel="prefetch" href="/assets/index.html-6d048794.js" as="script"><link rel="prefetch" href="/assets/00-stappenplan.html-e5933619.js" as="script"><link rel="prefetch" href="/assets/01-databaseconnection.html-993d1835.js" as="script"><link rel="prefetch" href="/assets/02-stappenplan-dapper.html-ed14d2c5.js" as="script"><link rel="prefetch" href="/assets/03-tools.html-10d0929f.js" as="script"><link rel="prefetch" href="/assets/01-introduction.html-961bc5ce.js" as="script"><link rel="prefetch" href="/assets/02-mvvm-and-databinding.html-b983b2e4.js" as="script"><link rel="prefetch" href="/assets/03-ViewModels.html-a9a3ff9d.js" as="script"><link rel="prefetch" href="/assets/04-navigation.html-71a04aa4.js" as="script"><link rel="prefetch" href="/assets/05-styles-and-themes.html-822896fa.js" as="script"><link rel="prefetch" href="/assets/06-Api.html-a07d49d5.js" as="script"><link rel="prefetch" href="/assets/07-dapper-select.html-e1514765.js" as="script"><link rel="prefetch" href="/assets/08-dapper-inner-joins-deel-1.html-a1fde716.js" as="script"><link rel="prefetch" href="/assets/09-dapper-inner-joins-deel-2.html-2b90f955.js" as="script"><link rel="prefetch" href="/assets/10-dapper-insert-update-delete.html-bc08fc76.js" as="script"><link rel="prefetch" href="/assets/01-introduction.html-09198f34.js" as="script"><link rel="prefetch" href="/assets/02-mvvm-and-databinding.html-4b490bd3.js" as="script"><link rel="prefetch" href="/assets/04-collectionviews-models.html-184959f5.js" as="script"><link rel="prefetch" href="/assets/05-interfaces-and-repositories.html-d2ea9404.js" as="script"><link rel="prefetch" href="/assets/06-navigation.html-6b86d2fb.js" as="script"><link rel="prefetch" href="/assets/08-dapper-select.html-f149b7dd.js" as="script"><link rel="prefetch" href="/assets/09-dapper-inner-joins-deel-1.html-e81fcb6a.js" as="script"><link rel="prefetch" href="/assets/11-dapper-insert-update-delete.html-02bf42c0.js" as="script"><link rel="prefetch" href="/assets/xx-Api.html-a13c2637.js" as="script"><link rel="prefetch" href="/assets/xx-styles-and-themes.html-34b224ea.js" as="script"><link rel="prefetch" href="/assets/01-introduction.html-fccce204.js" as="script"><link rel="prefetch" href="/assets/02-mvvm-and-databinding.html-d165488d.js" as="script"><link rel="prefetch" href="/assets/03-ViewModels.html-4feffcd2.js" as="script"><link rel="prefetch" href="/assets/04-navigation.html-fe50c4bc.js" as="script"><link rel="prefetch" href="/assets/05-styles-and-themes.html-375e4000.js" as="script"><link rel="prefetch" href="/assets/06-Api.html-6580a813.js" as="script"><link rel="prefetch" href="/assets/07-dapper-select.html-4942870d.js" as="script"><link rel="prefetch" href="/assets/08-dapper-inner-joins-deel-1.html-c33a34ab.js" as="script"><link rel="prefetch" href="/assets/09-dapper-inner-joins-deel-2.html-c1b0db63.js" as="script"><link rel="prefetch" href="/assets/10-dapper-insert-update-delete.html-857731dd.js" as="script"><link rel="prefetch" href="/assets/01-introduction.html-d02fcff5.js" as="script"><link rel="prefetch" href="/assets/02-mvvm-and-databinding.html-2f3af622.js" as="script"><link rel="prefetch" href="/assets/03-ViewModels.html-cedf7525.js" as="script"><link rel="prefetch" href="/assets/04-navigation-old.html-447941c2.js" as="script"><link rel="prefetch" href="/assets/04-navigation.html-2a169f5c.js" as="script"><link rel="prefetch" href="/assets/05-styles-and-themes.html-7fa89819.js" as="script"><link rel="prefetch" href="/assets/06-Api.html-244efc42.js" as="script"><link rel="prefetch" href="/assets/07-dapper-select.html-3961368f.js" as="script"><link rel="prefetch" href="/assets/08-dapper-inner-joins-deel-1.html-1060bf72.js" as="script"><link rel="prefetch" href="/assets/09-dapper-inner-joins-deel-2.html-b1a30109.js" as="script"><link rel="prefetch" href="/assets/10-dapper-insert-update-delete.html-8beecf55.js" as="script"><link rel="prefetch" href="/assets/extra-oefeningen.html-7846525c.js" as="script"><link rel="prefetch" href="/assets/01-introduction.html-6e12e421.js" as="script"><link rel="prefetch" href="/assets/02-mvvm-and-databinding.html-e0e31da8.js" as="script"><link rel="prefetch" href="/assets/03-extra-oefeningen.html-19cd5537.js" as="script"><link rel="prefetch" href="/assets/04-collectionviews-models.html-99aeabeb.js" as="script"><link rel="prefetch" href="/assets/05-interfaces-and-repositories.html-153e1bb7.js" as="script"><link rel="prefetch" href="/assets/06-navigation.html-793b4686.js" as="script"><link rel="prefetch" href="/assets/07-extra-oefeningen2.html-8ab8d7af.js" as="script"><link rel="prefetch" href="/assets/08-dapper-select.html-3761fd0d.js" as="script"><link rel="prefetch" href="/assets/09-dapper-inner-joins-deel-1.html-babc5af6.js" as="script"><link rel="prefetch" href="/assets/10-dapper-inner-joins-deel-2.html-d129cebf.js" as="script"><link rel="prefetch" href="/assets/11-dapper-insert-update-delete.html-2edc29f3.js" as="script"><link rel="prefetch" href="/assets/xx-Api.html-acdeb30b.js" as="script"><link rel="prefetch" href="/assets/404.html-e0e02c07.js" as="script"><link rel="prefetch" href="/assets/index.html-0f5ae8fc.js" as="script"><link rel="prefetch" href="/assets/index.html-a7844aa2.js" as="script"><link rel="prefetch" href="/assets/index.html-0465592d.js" as="script"><link rel="prefetch" href="/assets/index.html-a9e89de2.js" as="script"><link rel="prefetch" href="/assets/index.html-26531b70.js" as="script"><link rel="prefetch" href="/assets/index.html-089877ab.js" as="script"><link rel="prefetch" href="/assets/index.html-7346a659.js" as="script"><link rel="prefetch" href="/assets/index.html-e946c1a3.js" as="script"><link rel="prefetch" href="/assets/00-stappenplan.html-63eb35db.js" as="script"><link rel="prefetch" href="/assets/01-databaseconnection.html-6a17b70c.js" as="script"><link rel="prefetch" href="/assets/02-stappenplan-dapper.html-2ba4600b.js" as="script"><link rel="prefetch" href="/assets/03-tools.html-fc0e0432.js" as="script"><link rel="prefetch" href="/assets/01-introduction.html-7601aed8.js" as="script"><link rel="prefetch" href="/assets/02-mvvm-and-databinding.html-63df2ef6.js" as="script"><link rel="prefetch" href="/assets/03-ViewModels.html-1826205c.js" as="script"><link rel="prefetch" href="/assets/04-navigation.html-2cbac6df.js" as="script"><link rel="prefetch" href="/assets/05-styles-and-themes.html-03ac1998.js" as="script"><link rel="prefetch" href="/assets/06-Api.html-43fd40ec.js" as="script"><link rel="prefetch" href="/assets/07-dapper-select.html-fc12f50a.js" as="script"><link rel="prefetch" href="/assets/08-dapper-inner-joins-deel-1.html-26564252.js" as="script"><link rel="prefetch" href="/assets/09-dapper-inner-joins-deel-2.html-f300c7e7.js" as="script"><link rel="prefetch" href="/assets/10-dapper-insert-update-delete.html-0e6601ea.js" as="script"><link rel="prefetch" href="/assets/01-introduction.html-3a72f6f4.js" as="script"><link rel="prefetch" href="/assets/02-mvvm-and-databinding.html-167fcc90.js" as="script"><link rel="prefetch" href="/assets/04-collectionviews-models.html-32983caa.js" as="script"><link rel="prefetch" href="/assets/05-interfaces-and-repositories.html-18579544.js" as="script"><link rel="prefetch" href="/assets/06-navigation.html-a7d521a5.js" as="script"><link rel="prefetch" href="/assets/08-dapper-select.html-389d3c6f.js" as="script"><link rel="prefetch" href="/assets/09-dapper-inner-joins-deel-1.html-95fe53cb.js" as="script"><link rel="prefetch" href="/assets/11-dapper-insert-update-delete.html-37fc82c6.js" as="script"><link rel="prefetch" href="/assets/xx-Api.html-72ef14db.js" as="script"><link rel="prefetch" href="/assets/xx-styles-and-themes.html-13e2d54a.js" as="script"><link rel="prefetch" href="/assets/01-introduction.html-35452f64.js" as="script"><link rel="prefetch" href="/assets/02-mvvm-and-databinding.html-25a93585.js" as="script"><link rel="prefetch" href="/assets/03-ViewModels.html-5acef181.js" as="script"><link rel="prefetch" href="/assets/04-navigation.html-7416e09f.js" as="script"><link rel="prefetch" href="/assets/05-styles-and-themes.html-a064ae77.js" as="script"><link rel="prefetch" href="/assets/06-Api.html-54b1965f.js" as="script"><link rel="prefetch" href="/assets/07-dapper-select.html-371c7662.js" as="script"><link rel="prefetch" href="/assets/08-dapper-inner-joins-deel-1.html-66e5e42c.js" as="script"><link rel="prefetch" href="/assets/09-dapper-inner-joins-deel-2.html-462cdb43.js" as="script"><link rel="prefetch" href="/assets/10-dapper-insert-update-delete.html-cdf0bb46.js" as="script"><link rel="prefetch" href="/assets/01-introduction.html-979bac15.js" as="script"><link rel="prefetch" href="/assets/02-mvvm-and-databinding.html-8011570a.js" as="script"><link rel="prefetch" href="/assets/03-ViewModels.html-671ca2f7.js" as="script"><link rel="prefetch" href="/assets/04-navigation-old.html-17c7d2d7.js" as="script"><link rel="prefetch" href="/assets/04-navigation.html-81023b7c.js" as="script"><link rel="prefetch" href="/assets/05-styles-and-themes.html-32e95b5c.js" as="script"><link rel="prefetch" href="/assets/06-Api.html-abc7cab8.js" as="script"><link rel="prefetch" href="/assets/07-dapper-select.html-23a6ed0e.js" as="script"><link rel="prefetch" href="/assets/08-dapper-inner-joins-deel-1.html-07999eaa.js" as="script"><link rel="prefetch" href="/assets/09-dapper-inner-joins-deel-2.html-a26985a5.js" as="script"><link rel="prefetch" href="/assets/10-dapper-insert-update-delete.html-a0b180a7.js" as="script"><link rel="prefetch" href="/assets/extra-oefeningen.html-372dc97f.js" as="script"><link rel="prefetch" href="/assets/01-introduction.html-3a8a78b8.js" as="script"><link rel="prefetch" href="/assets/02-mvvm-and-databinding.html-46cb0bac.js" as="script"><link rel="prefetch" href="/assets/03-extra-oefeningen.html-03316047.js" as="script"><link rel="prefetch" href="/assets/04-collectionviews-models.html-df3aa7e3.js" as="script"><link rel="prefetch" href="/assets/05-interfaces-and-repositories.html-5185a039.js" as="script"><link rel="prefetch" href="/assets/06-navigation.html-a9884487.js" as="script"><link rel="prefetch" href="/assets/07-extra-oefeningen2.html-b296e7c8.js" as="script"><link rel="prefetch" href="/assets/08-dapper-select.html-5e513f3a.js" as="script"><link rel="prefetch" href="/assets/09-dapper-inner-joins-deel-1.html-6c7bd4fc.js" as="script"><link rel="prefetch" href="/assets/10-dapper-inner-joins-deel-2.html-03331825.js" as="script"><link rel="prefetch" href="/assets/11-dapper-insert-update-delete.html-a8221ec0.js" as="script"><link rel="prefetch" href="/assets/xx-Api.html-101c7359.js" as="script"><link rel="prefetch" href="/assets/404.html-aa53134d.js" as="script"><link rel="prefetch" href="/assets/index.html-3ab05892.js" as="script"><link rel="prefetch" href="/assets/index.html-b90f7708.js" as="script"><link rel="prefetch" href="/assets/index.html-283414e5.js" as="script"><link rel="prefetch" href="/assets/index.html-63fb188d.js" as="script"><link rel="prefetch" href="/assets/index.html-ae5a95a2.js" as="script"><link rel="prefetch" href="/assets/index.html-36a40f8b.js" as="script"><link rel="prefetch" href="/assets/mermaid.core-441cfe09.js" as="script"><link rel="prefetch" href="/assets/highlight.esm-75b11b9d.js" as="script"><link rel="prefetch" href="/assets/markdown.esm-9d5bc2ce.js" as="script"><link rel="prefetch" href="/assets/reveal.esm-1a4c3ae7.js" as="script"><link rel="prefetch" href="/assets/zoom.esm-b83b91d0.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-1a9f4b8e.js" as="script"><link rel="prefetch" href="/assets/DropdownLink-9e5625ac.js" as="script"><link rel="prefetch" href="/assets/ExampleCode-4b9d6cec.js" as="script"><link rel="prefetch" href="/assets/Fig-4713e452.js" as="script"><link rel="prefetch" href="/assets/Filename-26c08817.js" as="script"><link rel="prefetch" href="/assets/FixIcons-10af70d3.js" as="script"><link rel="prefetch" href="/assets/GitPubLink-bc88fa7c.js" as="script"><link rel="prefetch" href="/assets/index-e32a7948.js" as="script"><link rel="prefetch" href="/assets/SearchResult-41d54e83.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Ga naar de hoofdinhoud</a><!--]--><!--[--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="vp-link vp-brand" href="/"><img class="vp-nav-logo" src="/icons/logo.svg" alt="Programming Advanced"><!----><span class="vp-site-name hide-in-pad">Programming Advanced</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="Lessen"><span class="title"><span class="font-icon icon person-chalkboard" style=""></span>Lessen</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class='vp-link nav-link' href='/lessen_2425/01-introduction'><!---->01 - Introductie &amp; installatie<!----></a></li><li class="dropdown-item"><a class='vp-link nav-link' href='/lessen_2425/02-mvvm-and-databinding'><!---->02 - MVVM en databinding<!----></a></li><li class="dropdown-item"><a class='vp-link nav-link' href='/lessen_2425/04-collectionviews-models'><!---->03 - CollectionViews en Models<!----></a></li><li class="dropdown-item"><a class='vp-link nav-link' href='/lessen_2425/05-interfaces-and-repositories'><!---->04 - Interfaces en Repositories<!----></a></li><li class="dropdown-item"><a class='vp-link nav-link' href='/lessen_2425/06-navigation'><!---->05 - Navigatie <!----></a></li><li class="dropdown-item"><a class='vp-link nav-link' href='/lessen_2425/08-dapper-select'><!---->06 - Dapper select<!----></a></li><li class="dropdown-item"><a class='vp-link nav-link' href='/lessen_2425/09-dapper-inner-joins-deel-1'><!---->07 - Dapper inner joins deel 1<!----></a></li><li class="dropdown-item"><a class='vp-link nav-link active' href='/lessen_2425/10-dapper-inner-joins-deel-2'><!---->08 - Dapper inner joins deel 2<!----></a></li><li class="dropdown-item"><a class='vp-link nav-link' href='/lessen_2425/11-dapper-insert-update-delete'><!---->09-dapper-insert-update-delete<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="Oefeningen"><span class="title"><span class="font-icon icon code" style=""></span>Oefeningen</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class='vp-link nav-link' href='/oefeningen_2425/01-introduction'><!---->01 - Introductie &amp; installatie<!----></a></li><li class="dropdown-item"><a class='vp-link nav-link' href='/oefeningen_2425/02-mvvm-and-databinding'><!---->02 - MVVM en databinding<!----></a></li><li class="dropdown-item"><a class='vp-link nav-link' href='/oefeningen_2425/03-extra-oefeningen'><!---->Extra oefeningen deel 1<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/oefeningen_2425/04-collectionsviews-models.html"><!---->03 - Collectionsviews en Models<!----></a></li><li class="dropdown-item"><a class='vp-link nav-link' href='/oefeningen_2425/05-interfaces-and-repositories'><!---->04 - Interfaces en repositories<!----></a></li><li class="dropdown-item"><a class='vp-link nav-link' href='/oefeningen_2425/06-navigation'><!---->05 - Navigatie<!----></a></li><li class="dropdown-item"><a class='vp-link nav-link' href='/oefeningen_2425/07-extra-oefeningen2'><!---->Extra oefeningen deel 2<!----></a></li><li class="dropdown-item"><a class='vp-link nav-link' href='/oefeningen_2425/08-dapper-select'><!---->06 - Dapper select<!----></a></li><li class="dropdown-item"><a class='vp-link nav-link' href='/oefeningen_2425/09-dapper-inner-joins-deel-1'><!---->07 - Dapper inner joins deel 1<!----></a></li><li class="dropdown-item"><a class='vp-link nav-link' href='/oefeningen_2425/10-dapper-inner-joins-deel-2'><!---->08 - Dapper inner joins deel 2<!----></a></li><li class="dropdown-item"><a class='vp-link nav-link' href='/oefeningen_2425/11-dapper-insert-update-delete'><!---->09-dapper-insert-update-delete<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="Hulpmiddelen"><span class="title"><span class="font-icon icon person-chalkboard" style=""></span>Hulpmiddelen</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class='vp-link nav-link' href='/hulpmiddelen/00-stappenplan'><!---->Stappenplan MAUI app<!----></a></li><li class="dropdown-item"><a class='vp-link nav-link' href='/hulpmiddelen/01-databaseconnection'><!---->DatabaseConnection<!----></a></li><li class="dropdown-item"><a class='vp-link nav-link' href='/hulpmiddelen/02-stappenplan-dapper'><!---->Stappenplan Dapper<!----></a></li><li class="dropdown-item"><a class='vp-link nav-link' href='/hulpmiddelen/03-tools'><!---->Nuttige tools<!----></a></li></ul></button></div></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><div class="nav-item hide-in-mobile"><button type="button" class="outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><!--[--><button type="button" class="search-pro-button" role="search" aria-label="Zoeken"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">Zoeken</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">K</kbd></div></button><!--]--><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><!--[--><a class='vp-link nav-link vp-sidebar-link vp-sidebar-page' href='/lessen_2425/01-introduction'><!---->Introductie en installatie<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class='vp-link nav-link vp-sidebar-link vp-sidebar-page' href='/lessen_2425/02-mvvm-and-databinding'><!---->MVVM en databinding<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class='vp-link nav-link vp-sidebar-link vp-sidebar-page' href='/lessen_2425/04-collectionviews-models'><!---->CollectionViews, Models en Repositories<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class='vp-link nav-link vp-sidebar-link vp-sidebar-page' href='/lessen_2425/05-interfaces-and-repositories'><!---->Repositories en Interfaces<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class='vp-link nav-link vp-sidebar-link vp-sidebar-page' href='/lessen_2425/06-navigation'><!---->Navigatie<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class='vp-link nav-link vp-sidebar-link vp-sidebar-page' href='/lessen_2425/08-dapper-select'><!---->Dapper select<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class='vp-link nav-link vp-sidebar-link vp-sidebar-page' href='/lessen_2425/09-dapper-inner-joins-deel-1'><!---->Dapper inner joins deel 1<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class='vp-link nav-link active vp-sidebar-link vp-sidebar-page active' href='/lessen_2425/10-dapper-inner-joins-deel-2'><!---->Dapper inner joins deel 2<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class='vp-link nav-link vp-sidebar-link vp-heading' href='/lessen_2425/10-dapper-inner-joins-deel-2#inleiding'><!---->Inleiding<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class='vp-link nav-link vp-sidebar-link vp-heading' href='/lessen_2425/10-dapper-inner-joins-deel-2#meervoudige-navigatie-properties'><!---->Meervoudige navigatie properties<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class='vp-link nav-link vp-sidebar-link vp-heading' href='/lessen_2425/10-dapper-inner-joins-deel-2#groeperen-van-data'><!---->Groeperen van data<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class='vp-link nav-link vp-sidebar-link vp-heading' href='/lessen_2425/10-dapper-inner-joins-deel-2#meervoudige-relaties-over-meerdere-tabellen'><!---->Meervoudige relaties over meerdere tabellen<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class='vp-link nav-link vp-sidebar-link vp-heading' href='/lessen_2425/10-dapper-inner-joins-deel-2#combinatie-van-meervoudige-en-enkelvoudige-relaties-1'><!---->Combinatie van meervoudige en enkelvoudige relaties - 1<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class='vp-link nav-link vp-sidebar-link vp-heading' href='/lessen_2425/10-dapper-inner-joins-deel-2#combinatie-van-meervoudige-en-enkelvoudige-relaties-2'><!---->Combinatie van meervoudige en enkelvoudige relaties - 2<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a class='vp-link nav-link vp-sidebar-link vp-heading' href='/lessen_2425/10-dapper-inner-joins-deel-2#enkele-belangrijke-aandachtspunten'><!---->Enkele belangrijke aandachtspunten<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a class='vp-link nav-link vp-sidebar-link vp-sidebar-page' href='/lessen_2425/11-dapper-insert-update-delete'><!---->Dapper insert, update en delete<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->Dapper inner joins deel 2</h1><div class="page-info"><span class="page-author-info" aria-label="AuteurðŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">Docenten Programming Advanced</span></span><span property="author" content="Docenten Programming Advanced"></span></span><!----><span class="page-date-info" aria-label="Geschreven DatumðŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2024-08-30T07:50:04.000Z"></span><!----><span class="page-reading-time-info" aria-label="LeestijdâŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>Ongeveer 5 minuten</span><meta property="timeRequired" content="PT5M"></span><!----><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">Op Deze Pagina<!----></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#inleiding">Inleiding</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#meervoudige-navigatie-properties">Meervoudige navigatie properties</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#groeperen-van-data">Groeperen van data</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#meervoudige-relaties-over-meerdere-tabellen">Meervoudige relaties over meerdere tabellen</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#combinatie-van-meervoudige-en-enkelvoudige-relaties-1">Combinatie van meervoudige en enkelvoudige relaties - 1</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#combinatie-van-meervoudige-en-enkelvoudige-relaties-2">Combinatie van meervoudige en enkelvoudige relaties - 2</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#enkele-belangrijke-aandachtspunten">Enkele belangrijke aandachtspunten</a></li><!----><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h1 id="dapper-inner-joins-deel-2" tabindex="-1"><a class="header-anchor" href="#dapper-inner-joins-deel-2" aria-hidden="true">#</a> Dapper inner joins deel 2</h1><h2 id="inleiding" tabindex="-1"><a class="header-anchor" href="#inleiding" aria-hidden="true">#</a> Inleiding</h2><p>In dit hoofdstuk leren we hoe we met Dapper een inner join kunnen uitvoeren en hierdoor data ophalen uit meerdere tabellen. Specifiek behandelen we een-op-veel relaties.</p><p><a href="https://gitpub.sebastiaanh.com/public/web/46ef35c2-1dda-40ee-bc8b-d05537965b9c" target="_blank" rel="noopener noreferrer">Download het voorbeeld van GitPub<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="meervoudige-navigatie-properties" tabindex="-1"><a class="header-anchor" href="#meervoudige-navigatie-properties" aria-hidden="true">#</a> Meervoudige navigatie properties</h2><p>Bestudeer volgende klasse:</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Klant</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Adres <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Bedrijf <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Land <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Plaats <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Postcode <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Telefoonnummer <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">ICollection<span class="token punctuation">&lt;</span>Order<span class="token punctuation">&gt;</span></span> Orders <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> Bedrijf<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><div class="highlight-line">Â </div><br><br><br><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>In deze klasse is er 1 meervoudige navigatie property: <code>Orders</code>. Deze property is meervoudig. Dit wil zeggen dat er meerdere orders aan een klant gekoppeld kunnen worden. Zoals je kan zien komt de navigation property overeen met een foreign key in de tabel <code>Orders</code>.</p><p>Om alle klante op te halen inclusief hun klanten, kunnen we volgende SQL query uitvoeren:</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> K<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span> O<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">FROM</span> Klanten K <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> Orders O <span class="token keyword">ON</span> K<span class="token punctuation">.</span>Id <span class="token operator">=</span> O<span class="token punctuation">.</span>KlantId <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> K<span class="token punctuation">.</span>Bedrijf<span class="token punctuation">,</span> O<span class="token punctuation">.</span>Id
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Voer deze query uit in Azure Data Studio en bekijk het resultaat. Je zal merken dat we heel wat gedupliceerde data krijgen. We krijgen namelijk meerdere keren dezelfde klant. Om dit op te lossen, zullen we moeten groeperen op het klant-object.</p><h2 id="groeperen-van-data" tabindex="-1"><a class="header-anchor" href="#groeperen-van-data" aria-hidden="true">#</a> Groeperen van data</h2><p>Als we deze logica zouden vertalen naar C# code, zal dit er als volgt uit zien in de KlantRepository:</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token return-type class-name">IEnumerable<span class="token punctuation">&lt;</span>Klant<span class="token punctuation">&gt;</span></span> <span class="token function">KlantenOphalenMetOrders</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">string</span></span> sql <span class="token operator">=</span> <span class="token string">@&quot;SELECT K.*, O.*
                    FROM Klanten K
                    INNER JOIN Orders O ON K.Id = O.KlantId
                    ORDER BY K.Bedrijf, O.Id&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">using</span> <span class="token class-name">IDbConnection</span> db <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SqlConnection</span><span class="token punctuation">(</span>ConnectionString<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> klanten <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Query</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Klant<span class="token punctuation">,</span> Order<span class="token punctuation">,</span> Klant<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>
        sql<span class="token punctuation">,</span>
        <span class="token punctuation">(</span>klant<span class="token punctuation">,</span> order<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        <span class="token punctuation">{</span>
            order<span class="token punctuation">.</span>Klant <span class="token operator">=</span> klant<span class="token punctuation">;</span>
            klant<span class="token punctuation">.</span>Orders <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>Order<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> order <span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> klant<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token function">GroepeerKlanten</span><span class="token punctuation">(</span>klanten<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name">ICollection<span class="token punctuation">&lt;</span>Klant<span class="token punctuation">&gt;</span></span> <span class="token function">GroepeerKlanten</span><span class="token punctuation">(</span><span class="token class-name">IEnumerable<span class="token punctuation">&lt;</span>Klant<span class="token punctuation">&gt;</span></span> klanten<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> gegroepeerd <span class="token operator">=</span> klanten<span class="token punctuation">.</span><span class="token function">GroupBy</span><span class="token punctuation">(</span>k <span class="token operator">=&gt;</span> k<span class="token punctuation">.</span>Id<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">List<span class="token punctuation">&lt;</span>Klant<span class="token punctuation">&gt;</span></span> klantenMetOrders <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>Klant<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> groep <span class="token keyword">in</span> gegroepeerd<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> klant <span class="token operator">=</span> groep<span class="token punctuation">.</span><span class="token function">First</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List<span class="token punctuation">&lt;</span>Order<span class="token punctuation">&gt;</span></span> alleOrders <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>Order<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> k <span class="token keyword">in</span> groep<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            alleOrders<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span>Orders<span class="token punctuation">.</span><span class="token function">First</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        klant<span class="token punctuation">.</span>Orders <span class="token operator">=</span> alleOrders<span class="token punctuation">;</span>
        klantenMetOrders<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>klant<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> klantenMetOrders<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line">Â </div><div class="highlight-line">Â </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Merk op dat we hier op regel 14 de orders gelijk stellen aan een nieuwe lijst van orders. Dit is nodig omdat Dapper de orders niet automatisch zal toevoegen aan de klant. We zullen dit zelf moeten doen. Voorlopig is de <code>Orders</code> property dus gelijk aan een lijst met 1 order.</p><p>De methode <code>GroepeerKlanten</code> zal de klanten groeperen op basis van hun Id. Hierdoor krijgen we een lijst met klanten waarbij elke klant maar 1 keer voorkomt. De orders van de klant worden hierbij samengevoegd in een lijst. Deze lijst wordt dan toegekend aan de <code>Orders</code> property van de klant.</p><p>Als eindresultaat krijgen we dus een lijst met klanten waarbij elke klant maar 1 keer voorkomt en waarbij de orders van de klant in een lijst zitten.</p><h2 id="meervoudige-relaties-over-meerdere-tabellen" tabindex="-1"><a class="header-anchor" href="#meervoudige-relaties-over-meerdere-tabellen" aria-hidden="true">#</a> Meervoudige relaties over meerdere tabellen</h2><p>Stel dat we alle klanten willen tonen inclusief hun orders. Daarnaast willen we voor elk order ook nog de orderlijnen tonen die hierbij horen. We zullen dus een inner join moeten uitvoeren op 3 tabellen. Dit kunnen we doen door de volgende query uit te voeren:</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> K<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span> O<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span> OL<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">FROM</span> Klanten K <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> Orders O <span class="token keyword">ON</span> K<span class="token punctuation">.</span>Id <span class="token operator">=</span> O<span class="token punctuation">.</span>KlantId <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> Orderlijnen OL <span class="token keyword">ON</span> O<span class="token punctuation">.</span>Id <span class="token operator">=</span> OL<span class="token punctuation">.</span>OrderId <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> K<span class="token punctuation">.</span>Bedrijf<span class="token punctuation">,</span> O<span class="token punctuation">.</span>Id
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Voer deze query uit in Azure Data Studio en bekijk het resultaat. Je zal merken dat we heel wat gedupliceerde data krijgen. We krijgen namelijk meerdere keren dezelfde klant en order. Om dit op te lossen, zullen we moeten groeperen op het klant-object en op het order-object.</p><p>In C# code zal dit er als volgt uit zien in de Klantrepository:</p><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="codetab-58-0" aria-selected="true">KlantenOphalenMetOrdersEnOrderlijnen</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-58-1" aria-selected="false">GroepeerKlanten</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-58-2" aria-selected="false">GroepeerOrders</button></div><!--[--><div class="vp-code-tab active" id="codetab-58-0" role="tabpanel" aria-expanded="true"><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token return-type class-name">IEnumerable<span class="token punctuation">&lt;</span>Klant<span class="token punctuation">&gt;</span></span> <span class="token function">KlantenOphalenMetOrdersEnOrderlijnen</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">string</span></span> sql <span class="token operator">=</span> <span class="token string">@&quot;SELECT K.*, O.*, OL.*
                    FROM Klanten K
                    INNER JOIN Orders O ON K.Id = O.KlantId
                    INNER JOIN Orderlijnen OL ON O.Id = OL.OrderId
                    ORDER BY K.Bedrijf, O.Id&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token class-name">IDbConnection</span> db <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SqlConnection</span><span class="token punctuation">(</span>ConnectionString<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> klanten <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Query</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Klant<span class="token punctuation">,</span> Order<span class="token punctuation">,</span> Orderlijn<span class="token punctuation">,</span> Klant<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>
            sql<span class="token punctuation">,</span>
            <span class="token punctuation">(</span>klant<span class="token punctuation">,</span> order<span class="token punctuation">,</span> orderlijn<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
            <span class="token punctuation">{</span>
                order<span class="token punctuation">.</span>Klant <span class="token operator">=</span> klant<span class="token punctuation">;</span>
                orderlijn<span class="token punctuation">.</span>Order <span class="token operator">=</span> order<span class="token punctuation">;</span>
                order<span class="token punctuation">.</span>Orderlijnen <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>Orderlijn<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> orderlijn <span class="token punctuation">}</span><span class="token punctuation">;</span>
                klant<span class="token punctuation">.</span>Orders <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>Order<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> order <span class="token punctuation">}</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> klant<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name"><span class="token keyword">var</span></span> gegroepeerdeKlanten <span class="token operator">=</span> <span class="token function">GroepeerKlanten</span><span class="token punctuation">(</span>klanten<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> gegroepeerdeKlanten<span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>k <span class="token operator">=&gt;</span>
        <span class="token punctuation">{</span>
            k<span class="token punctuation">.</span>Orders <span class="token operator">=</span> <span class="token function">GroepeerOrders</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span>Orders<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> k<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line">Â </div><div class="highlight-line">Â </div><br><br><br><br><div class="highlight-line">Â </div><br><br><br><div class="highlight-line">Â </div><br><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="vp-code-tab" id="codetab-58-1" role="tabpanel" aria-expanded="false"><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name">ICollection<span class="token punctuation">&lt;</span>Klant<span class="token punctuation">&gt;</span></span> <span class="token function">GroepeerKlanten</span><span class="token punctuation">(</span><span class="token class-name">IEnumerable<span class="token punctuation">&lt;</span>Klant<span class="token punctuation">&gt;</span></span> klanten<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> gegroepeerd <span class="token operator">=</span> klanten<span class="token punctuation">.</span><span class="token function">GroupBy</span><span class="token punctuation">(</span>k <span class="token operator">=&gt;</span> k<span class="token punctuation">.</span>Id<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">List<span class="token punctuation">&lt;</span>Klant<span class="token punctuation">&gt;</span></span> klantenMetOrders <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>Klant<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> groep <span class="token keyword">in</span> gegroepeerd<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> klant <span class="token operator">=</span> groep<span class="token punctuation">.</span><span class="token function">First</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List<span class="token punctuation">&lt;</span>Order<span class="token punctuation">&gt;</span></span> alleOrders <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>Order<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> k <span class="token keyword">in</span> groep<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            alleOrders<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span>Orders<span class="token punctuation">.</span><span class="token function">First</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        klant<span class="token punctuation">.</span>Orders <span class="token operator">=</span> alleOrders<span class="token punctuation">;</span>
        klantenMetOrders<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>klant<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> klantenMetOrders<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="vp-code-tab" id="codetab-58-2" role="tabpanel" aria-expanded="false"><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name">ICollection<span class="token punctuation">&lt;</span>Order<span class="token punctuation">&gt;</span></span> <span class="token function">GroepeerOrders</span><span class="token punctuation">(</span><span class="token class-name">IEnumerable<span class="token punctuation">&lt;</span>Order<span class="token punctuation">&gt;</span></span> orders<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> orders<span class="token punctuation">.</span><span class="token function">GroupBy</span><span class="token punctuation">(</span>o <span class="token operator">=&gt;</span> o<span class="token punctuation">.</span>Id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>g <span class="token operator">=&gt;</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> order <span class="token operator">=</span> g<span class="token punctuation">.</span><span class="token function">First</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order<span class="token punctuation">.</span>Orderlijnen <span class="token operator">=</span> g<span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>o <span class="token operator">=&gt;</span> o<span class="token punctuation">.</span>Orderlijnen<span class="token punctuation">.</span><span class="token function">Single</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> order<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--]--></div><p>In bovenstaande code groeperen we eerst op regel 17 de klanten. Daarna groeperen we op regel 23 de orders.</p><p>Het groeperen van de orders gebeurt op dezelfde denkwijze en manier als het groeperen van de klanten.</p><h3 id="combinatie-van-meervoudige-en-enkelvoudige-relaties-1" tabindex="-1"><a class="header-anchor" href="#combinatie-van-meervoudige-en-enkelvoudige-relaties-1" aria-hidden="true">#</a> Combinatie van meervoudige en enkelvoudige relaties - 1</h3><p>Stel dat we in ons overzicht alle klanten willen tonen inclusief hun orders. Daarnaast willen we voor elk order ook nog de orderlijnen tonen die hierbij horen. Voor een orderlijn willen we ook nog de naam tonen van het product dat gekoppeld is. De SQL om al deze data op te halen ziet er als volgt uit:</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> K<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span> O<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span> OL<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span> P<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">FROM</span> Klanten K <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> Orders O <span class="token keyword">ON</span> K<span class="token punctuation">.</span>Id <span class="token operator">=</span> O<span class="token punctuation">.</span>KlantId <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> Orderlijnen OL <span class="token keyword">ON</span> O<span class="token punctuation">.</span>Id <span class="token operator">=</span> OL<span class="token punctuation">.</span>OrderId <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> Producten P <span class="token keyword">ON</span> OL<span class="token punctuation">.</span>ProductId <span class="token operator">=</span> P<span class="token punctuation">.</span>Id <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> K<span class="token punctuation">.</span>Bedrijf<span class="token punctuation">,</span> O<span class="token punctuation">.</span>Id
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>De denkwijze om dit op te lossen is een combinatie van de vorige voorbeelden. De code ziet er als volgt uit:</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token return-type class-name">IEnumerable<span class="token punctuation">&lt;</span>Klant<span class="token punctuation">&gt;</span></span> <span class="token function">KlantenOphalenMetOrdersEnOrderlijnenEnProduct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">string</span></span> sql <span class="token operator">=</span> <span class="token string">@&quot;SELECT K.*, O.*, OL.*, P.*
                    FROM Klanten K
                    INNER JOIN Orders O ON K.Id = O.KlantId
                    INNER JOIN Orderlijnen OL ON O.Id = OL.OrderId
                    INNER JOIN Producten P ON OL.ProductId = P.Id
                    ORDER BY K.Bedrijf, O.Id&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token class-name">IDbConnection</span> db <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SqlConnection</span><span class="token punctuation">(</span>ConnectionString<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> klanten <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Query</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Klant<span class="token punctuation">,</span> Order<span class="token punctuation">,</span> Orderlijn<span class="token punctuation">,</span> Product<span class="token punctuation">,</span> Klant<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>
            sql<span class="token punctuation">,</span>
            <span class="token punctuation">(</span>klant<span class="token punctuation">,</span> order<span class="token punctuation">,</span> orderlijn<span class="token punctuation">,</span> product<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
            <span class="token punctuation">{</span>
                order<span class="token punctuation">.</span>Klant <span class="token operator">=</span> klant<span class="token punctuation">;</span>
                orderlijn<span class="token punctuation">.</span>Order <span class="token operator">=</span> order<span class="token punctuation">;</span>
                orderlijn<span class="token punctuation">.</span>Product <span class="token operator">=</span> product<span class="token punctuation">;</span>
                order<span class="token punctuation">.</span>Orderlijnen <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>Orderlijn<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> orderlijn <span class="token punctuation">}</span><span class="token punctuation">;</span>
                klant<span class="token punctuation">.</span>Orders <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>Order<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> order <span class="token punctuation">}</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> klant<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

        <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name"><span class="token keyword">var</span></span> gegroepeerdeKlanten <span class="token operator">=</span> <span class="token function">GroepeerKlanten</span><span class="token punctuation">(</span>klanten<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">return</span> gegroepeerdeKlanten<span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>k <span class="token operator">=&gt;</span>
        <span class="token punctuation">{</span>
            k<span class="token punctuation">.</span>Orders <span class="token operator">=</span> <span class="token function">GroepeerOrders</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span>Orders<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> k<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Product is enkelvoudig en kan dus rechtstreeks worden toegekend</li><li>Orderlijnen is meervoudig en kan dus niet rechtstreeks worden toegekend. We moeten eerst groeperen op de orderlijnen van een order.</li><li>Orders is meervoudig en kan dus niet rechtstreeks worden toegekend. We moeten eerst groeperen op de orders van een klant.</li></ul><h3 id="combinatie-van-meervoudige-en-enkelvoudige-relaties-2" tabindex="-1"><a class="header-anchor" href="#combinatie-van-meervoudige-en-enkelvoudige-relaties-2" aria-hidden="true">#</a> Combinatie van meervoudige en enkelvoudige relaties - 2</h3><p>Stel dat we in ons overzicht alle klanten willen tonen met bijhorende orders. Voor elk order willen we de orderlijnen tonen inclusief het product dat hieraan gekoppeld is. Daarnaast willen we ook weten welke werknemer dit order heeft verwerkt. De SQL om al deze data op te halen ziet er als volgt uit:</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> K<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span> O<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span> OL<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span> P<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span> W<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword">FROM</span> Klanten K
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> Orders O <span class="token keyword">ON</span> K<span class="token punctuation">.</span>Id <span class="token operator">=</span> O<span class="token punctuation">.</span>KlantId
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> Orderlijnen OL <span class="token keyword">ON</span> O<span class="token punctuation">.</span>Id <span class="token operator">=</span> OL<span class="token punctuation">.</span>OrderId
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> Producten P <span class="token keyword">ON</span> OL<span class="token punctuation">.</span>ProductId <span class="token operator">=</span> P<span class="token punctuation">.</span>Id
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> Werknemers W <span class="token keyword">ON</span> O<span class="token punctuation">.</span>WerknemerId <span class="token operator">=</span> W<span class="token punctuation">.</span>Id
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> K<span class="token punctuation">.</span>Bedrijf<span class="token punctuation">,</span> O<span class="token punctuation">.</span>Id
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>De denkwijze om dit op te lossen is een combinatie van de vorige voorbeelden. De code ziet er als volgt uit:</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token return-type class-name">IEnumerable<span class="token punctuation">&lt;</span>Klant<span class="token punctuation">&gt;</span></span> <span class="token function">KlantenOphalenMetOrdersEnOrderlijnenEnProductEnWerknemers</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">string</span></span> sql <span class="token operator">=</span> <span class="token string">@&quot;SELECT K.*, O.*, OL.*, P.*, W.*
                    FROM Klanten K
                    INNER JOIN Orders O ON K.Id = O.KlantId
                    INNER JOIN Orderlijnen OL ON O.Id = OL.OrderId
                    INNER JOIN Producten P ON OL.ProductId = P.Id
                    INNER JOIN Werknemers W ON O.WerknemerId = W.Id
                    ORDER BY K.Bedrijf, O.Id&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token class-name">IDbConnection</span> db <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SqlConnection</span><span class="token punctuation">(</span>ConnectionString<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> klanten <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Query</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Klant<span class="token punctuation">,</span> Order<span class="token punctuation">,</span> Orderlijn<span class="token punctuation">,</span> Product<span class="token punctuation">,</span> Werknemer<span class="token punctuation">,</span> Klant<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>
            sql<span class="token punctuation">,</span>
            <span class="token punctuation">(</span>klant<span class="token punctuation">,</span> order<span class="token punctuation">,</span> orderlijn<span class="token punctuation">,</span> product<span class="token punctuation">,</span> werknemer<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
            <span class="token punctuation">{</span>
                order<span class="token punctuation">.</span>Klant <span class="token operator">=</span> klant<span class="token punctuation">;</span>
                order<span class="token punctuation">.</span>Werknemer <span class="token operator">=</span> werknemer<span class="token punctuation">;</span>
                orderlijn<span class="token punctuation">.</span>Order <span class="token operator">=</span> order<span class="token punctuation">;</span>
                orderlijn<span class="token punctuation">.</span>Product <span class="token operator">=</span> product<span class="token punctuation">;</span>
                order<span class="token punctuation">.</span>Orderlijnen <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>Orderlijn<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> orderlijn <span class="token punctuation">}</span><span class="token punctuation">;</span>
                klant<span class="token punctuation">.</span>Orders <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>Order<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> order <span class="token punctuation">}</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> klant<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

        <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name"><span class="token keyword">var</span></span> gegroepeerdeKlanten <span class="token operator">=</span> <span class="token function">GroepeerKlanten</span><span class="token punctuation">(</span>klanten<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> gegroepeerdeKlanten<span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>k <span class="token operator">=&gt;</span>
        <span class="token punctuation">{</span>
            k<span class="token punctuation">.</span>Orders <span class="token operator">=</span> <span class="token function">GroepeerOrders</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span>Orders<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> k<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Werknemer is enkelvoudig en kan dus rechtstreeks worden toegekend</li><li>Product is enkelvoudig en kan dus rechtstreeks worden toegekend</li><li>Orderlijnen is meervoudig en kan dus niet rechtstreeks worden toegekend. We moeten eerst groeperen op de orderlijnen van een order.</li><li>Orders is meervoudig en kan dus niet rechtstreeks worden toegekend. We moeten eerst groeperen op de orders van een klant.</li></ul><h2 id="enkele-belangrijke-aandachtspunten" tabindex="-1"><a class="header-anchor" href="#enkele-belangrijke-aandachtspunten" aria-hidden="true">#</a> Enkele belangrijke aandachtspunten</h2><ul><li>Hoe meer meervoudige navigatie properties je hebt, hoe meer je zal moeten groeperen en hoe langer de query zal worden. Dit betekent ook een langere uitvoeringstijd van de query.</li><li>Voeg enkel hetgeen toe dat je nodig hebt.</li><li>Denk aan performantie.</li></ul></div><!----><footer class="page-meta"><!----><div class="meta-item git-info"><div class="update-time"><span class="label">Laatst geÃ¼pdate: </span><!----></div><div class="contributors"><span class="label">Bijdragers: </span><!--[--><!--[--><span class="contributor" title="email: u0157634@thomasmore.be">Moonenm</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class='vp-link nav-link prev' href='/lessen_2425/09-dapper-inner-joins-deel-1'><div class="hint"><span class="arrow start"></span>Vorige</div><div class="link"><!---->Dapper inner joins deel 1</div></a><a class='vp-link nav-link next' href='/lessen_2425/11-dapper-insert-update-delete'><div class="hint">Volgende<span class="arrow end"></span></div><div class="link">Dapper insert, update en delete<!----></div></a></nav><!----><!----><!--]--></main><!--]--><!----></div><!--]--><!--]--><!----><!----><!----><!--]--></div>
    <script type="module" src="/assets/app-8012b78e.js" defer></script>
  </body>
</html>
